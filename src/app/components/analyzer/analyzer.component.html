<header
    class="w-full bg-gradient-to-r from-gray-700 to-gray-800 py-12 flex items-center justify-center text-center text-white">
    <div class="w-full max-w-3xl px-6">
        <h1 class="text-3xl font-extrabold leading-tight mb-4">Resume Analysis</h1>
        <p class="text-xl text-gray-400">AI-Optimized Resume Analyzer: Tailored Feedback for the Perfect Job Match
        </p>
    </div>
</header>
<div class="grid justify-content-center m-6 w-full p-datatable-wrapper w-full">
    <p-table [value]="reports" [scrollable]="true" scrollHeight="500px" [lazy]="true" class="w-5">
        <ng-template #caption>
            <div class="flex">
                <p-button (onClick)="showAnalyzerDialog()" label="Create Report" icon="pi pi-microchip-ai" class="" />
                <div class="ml-auto">
                    <!-- <p-floatlabel variant="on">
                        <p-datepicker [(ngModel)]="date" inputId="on_label" showIcon iconDisplay="input" />
                        <label for="on_label">Export by date</label>
                    </p-floatlabel> -->
                    <p-button (onClick)="getAllReports()" [outlined]="true" icon="pi pi-refresh" pTooltip="Refresh"
                        tooltipPosition="top" />
                    
                </div>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th>Report Name</th>
                <th>File Name</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template #body let-report>
            <tr>
                <td>{{ report.reportName }}</td>
                <td>{{ report.bucketFilePath?.split('/').pop() }}</td>
                <!-- <td>{{ report.reportDate }}</td> -->
                <td>{{ report.createdDate | date:'fullDate' }}</td>
                <td>
                    <p-badge [value]="report?.status" [severity]="getSeverity(report.status)" />
                </td>
                <td class="ml-auto">
                    <!-- <p-button pTooltip="View Report" tooltipPosition="top" icon="pi pi-eye" [rounded]="true" [text]="true"/> -->
                    <button [disabled]="!report.status.includes('Generated')" pTooltip="Download" tooltipPosition="top" pButton pRipple type="button" [icon]="'pi pi-download'" (click)="downloadFile(report)" size="small" text></button>
                </td>
                
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="5">No reports found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
<p-confirmpopup />

<p-dialog header="Create Report" [dismissableMask]="true" [modal]="true" [(visible)]="showCreateReportDialog"
    [style]="{ width: '35rem' }">
    <form class="grid flex mt-3" [formGroup]="analyzeForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
        <div class="flex items-center gap-4  col-12 field">
            <p-floatlabel class="w-full">
                <input formControlName="reportName" pInputText id="over_label" autocomplete="off" class="w-full" />
                <label for="over_label">Report Name</label>
            </p-floatlabel>
        </div>
        <div class="flex items-center col-12 field">
            <p-floatlabel class="w-full">
                <textarea  formControlName="jobDescription" variant="filled" pTextarea id="over_label" rows="5" cols="30" style="resize: none"
                    class="h-full w-full"></textarea>
                <label for="over_label">Job Description</label>
            </p-floatlabel>
        </div>
        <div class="flex items-center col-6 field">
            <!-- <p-floatlabel>
                <p-datepicker formControlName="reminderDate" showIcon iconDisplay="input" appendTo="body"
                    [(ngModel)]="reminderDate" [showButtonBar]="true" />
                <label for="over_label">Add Date</label>
            </p-floatlabel> -->
            <p-fileupload mode="basic" name="demo[]" chooseIcon="pi pi-upload" customUpload="true"
                accept=".pdf" maxFileSize="1000000" (onSelect)="onBasicUploadAuto($event)" [auto]="false" chooseLabel="Upload Resume" />
        </div>
        <!-- <div class="flex items-center col-6 field">
            <p-floatlabel>
                
                <label for="over_label">Add Time</label>
            </p-floatlabel>
        </div>
        <div class="flex items-center col-6 field">
            <p-autocomplete formControlName="priority" [dropdown]="true" [suggestions]="items" field="priority"
                appendTo="body" (completeMethod)="search($event)" />
        </div>
        <div class="flex items-center col-6 field">
            <p-autocomplete formControlName="frequency" [dropdown]="true" [suggestions]="frequencyitems"
                field="freqName" appendTo="body" (completeMethod)="searchFreq($event)" />
        </div> -->
        <div class=" col-12 flex justify-end gap-2">
            <p-button label="Cancel" severity="secondary" (click)="showCreateReportDialog = false" />
            <p-button label="Save" type="submit" />
        </div>
    </form>
</p-dialog>